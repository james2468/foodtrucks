<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
  function initialize() {
    var latlng = new google.maps.LatLng(38.90, -77.03);
    var myOptions = {
      zoom: 14,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    // add a marker
    {% for r in trucks %}
        var anon = function() {
            var marker = new google.maps.Marker({
                map: map,
                position: new google.maps.LatLng({{r.location.x}}, {{r.location.y}}),
                //icon: new google.maps.MarkerImage("{{r.avatar}}", new google.maps.Size(30, 30)),
                title: "{{r.name}}"
                });

            google.maps.event.addListener(marker, 'click', function() {
                var infowindow = new google.maps.InfoWindow({ content:
                        "<b>{{r.name}}</b><br> {{r.update}}" });
                infowindow.open(map, marker);
                });
        }();
    {% endfor %}
  }

</script>
</head>
<body onload="initialize()">
  <div id="map_canvas" style="width:100%; height:100%"></div>
</body>
</html>
